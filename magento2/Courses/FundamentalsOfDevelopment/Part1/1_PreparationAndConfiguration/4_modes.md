# Режимы (modes)

В M2 появились режимы работы, основные:

* Developer
* Production
* Default

Основное отличие этих режимов — это работа со статичными файлами. 

Так-же есть режим maintance, он предназначен для ограничения доступа к сайту, например на время технических работ, деплоя.

## Developer

Предназначен для разработки, основные особености:

* Статичные файлы не копируются, вместо этого создаются симлинки, они генерируются по запросу
* Неотловленные исключения отображаются в браузере
* Исключения возникшие в обработчике ошибок не логируются
* Системные логи в _var/report_ наиболее детальны.

## Production

Предназначен для использования на проде, основные особености:

* Наибольшая производительность
* Исключения не отображются пользователю, только логируются
* Статичные файлы не генерируются по запросу, вместо этого они генерируются специальной командой
* Поскольку файлы сатики генерируется по команде, то пользователь от которого исполняется маджента может иметь прова только на чтения директории _pub/static_

## Default

Дефолтный модуль используется по умолчанию при развёртывании нового инстанса M2, особености:

* используется если не указан иной режим
* генерирует статичные файлы по запросу, затем кеширует их
* не показывает исключения, пишет их в лог

## Maintenance

Режим обслуживания, особености:

* Используется чтобы сделать сайт недоступным, например во время деплоя или технического обслуживания
* Для режима используется `Bootstrap::asertMaintenance()`, чтобы его активировать нужно содзать флаг _var/.maintenance.flag_
* Можно указать группу людей имеющих доступ к сайту в файле _var/.maintenance.ip_

## Определения режима

Есть несколько способов изменить режим в M2, достаточно использовать только один:

* Через консольную команду: `php bin/magento mode:set <mode>`
* Отредакировав _etc/env.php_, поле `MAGE_MODE`
* Изменить `.htaccess`, раскоментировав/добавив:
```
SetEnv MAGE_MODE developer
```
* Установить fastcgi_param в конфиге nginx:
```
fastcgi_param MAGE_MODE developer
```
* через конфиг php-fpm:
```
env[MAGE_MODE]=[developer|default|production]
```

