# Глава 14

## Подстановка

`:substitute` команда подстановки, имеет такой синтаксис:

```
:[range]s[ubstitute]/{pattern}/{string}/[flags]
```

Здесь:

* `[range]` — диапазон действия;
* `{pattern}` — регулярное выражение по которому будет идти поиск строки для замены;
* `{string}` — строка на которую будет произведена замена;
* `[flags]` — дополнительные параметры команды подстановки:
  * `g` — включает глобальный режим действия, которые производит замену всех совпадений, а не первого найденного. Стоит обратить внимание, что по умолчанию замена производится для с диапазоном 1, т.е. в каждой строке будет заменено первое вхождение, для того чтобы обойти и заменить все совпадения в качестве диапазона нужно указать `%s`, например: `%s/going/rolling/g`;
  * `c` — даёт возможность подтвердить/отвергнуть замену найденного совпадения, в этом режиме для подтверждения замены используется `y`, для отмены `n`;
  * `n` — показывает количество найденных совпадений, замена при этом не производится;
  * `e` — отключить сообщение об ошибке, если шаблон не найден;
  * `&` — использовать тот же набор флагов, что и при прошлом вызове команды подстановки.

В шаблоне поиска можно использовать спец. символы, некоторые из них:

* `\r` — возврат каретки (перевод строки);
* `\t` — табуляция;
* `\\` — символ обратного слэша;
* `\{number}` — содержимое совпадения в скобках (1-9), если использовать 0 то будет подставлено полное совпадение;
* `&` — полное совпадение;
* `~` — использовать `{string}` из прошлой команды подстановки;
* `\={Vim_script}` — вычислить результат выражение `{Vim_script}`.

Если при вызове команды оставить `{pattern}` пустым, то будет использован последний использованный шаблон.

`:let @{register}={string}` —  поменять значение регистра `{register}` на `{string}`.

`g&` — выполнить последнюю команду подстановки для всего файла.