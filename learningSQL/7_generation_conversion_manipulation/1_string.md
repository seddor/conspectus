# Строковые данные

При работе со строковыми данными используется один из следующих типов:

* `CHAR`
* `varchar`
* `text`

## Создание строк

Строка в SQL заключается в кавычки.

Если попытаться вставить в поле строку длины больше допустимой, то в зависимости от СУБД или будет сгенирирована ошибка, или строка будет усечена(MySQL при этом ещё генерирует варнинг).

Посмотреть варнинги:
```SQL
SHOW WARNINGS;
```

### Экранирование

Экранировать можно с помощью:
* \
* \`

Апостроф в строке тоже считается кавычкой, поэтому его нужно экранировать.

Если нужно закавычить выводимую строку и экранировать в ней спец.символы, то в MySQL есть встроенная функция:
```SQL
SELECT QUOTE(text_fld)
FROM string_tbl;
```

### Спеациальные символы

Функция MySQL позволяющая создавать символы из набора ASCII:
```SQL
CHAR(code);
```
code — числовой код символа.

## Работа со строками

### Строковые функции возвращающие числа

Получения длины строки:
```SQL
SELECT LENGTH(char_fld) char_length FROM string_tbl;
```

Нахождение позиции подстроки в строке:
```SQL
SELECT POSITION('characters' IN vchar_fld) FROM string_tbl;
```
Если подстроки нет, то вернётся 0.

>В БД идексы в строках считаются с 1.

Если необходимо найти подстроку начиная с не с начало строки:
```SQL
SELECT LOCATE('is', vchar_fld, 5) FROM string_tbl;
```
здесь 3й параметр это индекс начала поиска.

Функция сравнения строк:
```SQL
SELECT STRCMP('12345','12345') 12345_12345;
```
Возвращаемые значения:
* -1 — первая строка в порядке сортировки расположена до второй
* 0 — строки идентичны
* 1 — первая строка в порядке сортировки расположена после второй строки

Так-же для сравнения в блоке select можно использовать `LIKE` и `REGEX`, резльтатами будет 1 для совпадений и 0 для не совпадений.

### Строковые функции возвращающие строки

Функция для объединения строк:
```SQL
SELECT CONCAT('danke sch', CHAR(148), 'n', text_fld)
```

Функция `insert` принимает 4 аргумента:
1. исходную строку
2. начальное положение
3. число символов требующих замену(если 0 то строка будет проста вставлена со сдвигом вправо)
4. Заеняющую/вставляющую строку
```SQL
SELECT INSERT('goodbye world', 1, 7, 'hello') string;
```

Функция для извлечения подстроки:
```SQL
SELECT SUBSTRING('goodbye cruel world', 9, 5);
```
аргуметы:
1. Исходная строка
2. Начальная позиция
3. Число символов
