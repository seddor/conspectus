# Объекты и структуры данных

## Антисимметрия данных/объектов

* Объекты — скрывают свои данные за абстракциями и предоставляют функциии, работающие с этими данными;
* Скруктуру данных раскрывают свои данные и не имеют осмысленных функций.

## Закон Деметры

>Модуль не должен знать внутреннее устройство тех объектов, с которыми он работает.

В более точной формулировке: метод f класса C должен ограничиться вызовом методов следующих объектов:

* С;
* объекты, созданные f;
* объекты, переданные f в качестве аргумента;
* объекты, хранящиеся в переменной экземпляра C.

Метод _не должен_ вызывать методы объектов, возвращаемых любыми из разрешенных функций.

### Крущение поезда

Следуюя из прошлого пункта такой код нарушает закон Деметры:
```java
final String outputDir = ctxt.getOptions().getScratchDir().getAbsolutePath();
```

Такие конструкции назваются "крушение позеда", потому что цепочки вызовов напоминают сцепление вагонов поезда.

Обычно цепочки лушче разделять:
```java
Options opts = ctxt.getOptions();
File scratchDir = opts.getScratchDir();
final String outputDir = scratchDir.getAbsolutePath();
```

Нарушен ли закон Диметры на самом деле — завист от ситуации, зависит того являются ли `opts`, `scratchDir`, `outputDir` объектами или структурами данных, если это объекты то нарушает, если это структуры данных то нет.

### Гибриды

Гибриды объеденяют в себе использование как объектов так и структур данных, т.е. в них наряду с функциями чтение/записи есть и другие операции. Использование таких гибрадов стоит избегать.

## Объекты передачи данных

Объект передачи данных (DTO, data transfer object) — класс с публичными переменными и без функций. 

### Активные записи

Активные записи (Active records) представляет из себя особую разновидность DTO. Представляют из себя такие же классы, но с методами наподобии `save` и/или `find`. Как правило активные записи являются результатом прямого отображения таблиц баз данных или других источников данных.

Такме стуркутуры данных не стоит интерпретировать как объекты и добавлять в них бизнес-логику.
