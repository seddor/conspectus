1. На данный момент я выдел 3 API Gateway:

   - Общий API Gateway — находится в демелитаризированной зоне, предоставляет общий доступ к внутренним сервисам для внешних клиентов/систем
   - API Gateway клиентов и заказов — объединяет API сервиса заказов и клиентов, выделен т.к. оба сервиса содержат приватные данные клиентов и API gateway призван дополнительно обезопасить эти данные + для агрегации данных (например, получить заказы с клиентами и клиентов со вмеси заказами)
   - API Gateway каталога — объединяет сервис каталога и цен, выделен т.к. каталог и цены семантически связаны между собой, как правило при запросе товаров запрашивается и их цена, API Gateway используется для агрегации данных.

   Также выделил новый "сервис производства", объединяющий в себе данные телеметрии с производства, пока не понятно как это будет использоваться в нашей системе, поэтому для внешнего использования в общий API gateway сервис не выводил, вероятно сервис нужен только для внутреннего использования. Возможно в будущем к сервису можно будет добавить свой API Gateway для агрегации и рассылки данных между подписчиками на какие-нибудь метрики, но пока нет чётких требований к этому компоненту, поэтому шлюз для него не выделял.

2. 

- Общий API Gateway
  - Предоставление единой точки входа для внешних пользователей системы
  - Безопасность — шлюз будет находится в демелитаризированной зоне, чтобы снизить возможность проникновения злоумышленников в систему
  - Мониторинг — мониторинг запрос к системе и показателей системы
  - Тестирование — возможности перераспределять трафик пользователей на новые версии (канареечные релизы)
- API Gateway клиентов и заказов
  - Агрегация данных
  - Шифрование данных
- API Gateway каталога
  - Агрегация данных



> Насколько целесообразно нам API каталога показывать наружу через общий гейтвей?

Общий гейтвет в данном случае используется для централизации и предоставления единой точки входа, а также для мониторинга. В принципе, это для каталога это не так принципиально и можно вынести его API gateway отдельно чтобы не нагружать общий, API gateway каталога при этом тоже выносится в демелитаризированную зону.

> Непонятна целесообразность связи между производством и каталогом. Уточните это, пожалуйста

Поскольку непонятно пока как эти данные с производства будут использоваться, то я нарисовал связи с каталогом на всякий случай, возможно информация с производства как-то будет использоваться в каталоге, например в каталоге будет какой-то конструктор мебели, которому нужна будет информация со склада материалов, чтобы узнать доступа ли сборка данного товара, в общем необходимость этой связи зависит от тех целей, которые нам требуется от использования сервиса производства. 

## Оценка характеристик данных

Указано количество записей

| **Модель**                   | **Прирост в месяц** (до API gateway) | Прирост в квартал (до API gateway) | **Прирост в месяц** | Прирост в квартал |
| ---------------------------- | ------------------------------------ | ---------------------------------- | ------------------- | ----------------- |
| Товар                        | 3                                    | 9                                  | 6                   | 18                |
| Изображения товара           | 9                                    | 27                                 | 18                  | 54                |
| Категория                    | 0                                    | 1                                  | 0                   | 1                 |
| Товары категории             | 10                                   | 50                                 | 30                  | 90                |
| Заказ                        | 5000                                 | 15000                              | 20000               | 60000             |
| Позиция заказа               | 12000                                | 36000                              | 48000               | 144000            |
| Склад (для позиции)          | 14000                                | 42000                              | 60000               | 180000            |
| Адрес (заказ)                | 5000                                 | 15000                              | 20000               | 60000             |
| Доставка                     | 5000                                 | 15000                              | 20000               | 60000             |
| Метод доставки               | 4                                    | 12                                 | 4                   | 12                |
| Склад                        | 9                                    | 27                                 | 15                  | 45                |
| Матрица расстояний и городов | 10                                   | 30                                 | 12                  | 36                |
| Клиент                       | 100                                  | 300                                | 300                 | 900               |
| Адрес (Клиент)               | 100                                  | 300                                | 300                 | 900               |

